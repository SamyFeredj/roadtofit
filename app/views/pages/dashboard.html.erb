<div class="dashboard-container" data-controller="carousel">

  <div class="dashboard-statistiques">
    <% percentage = ((@daily_cal - @daily_cal_left).fdiv(@daily_cal) * 100).to_i %>
    <p class="percentage"><%= @daily_cal_left %> kcal</p>

    <div class="calories-progression-bar"></div>

    <div class="dashboard-details"
    data-controller="dashboard-details">

      <div class="details" data-action="click->dashboard-details#toggleDetails">
        <p>Détails</p>
        <svg data-dashboard-details-target="detailsIcon" class="toggle-icon-tobottom" width="18" height="9" viewBox="0 0 25 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M25 2.52564C24.9999 3.18729 24.7367 3.8218 24.2684 4.28959L14.2807 14.2695C13.8124 14.7372 13.1774 15 12.5153 15C11.8532 15 11.2183 14.7372 10.75 14.2695L0.762284 4.28959C0.523802 4.05943 0.33358 3.78413 0.202718 3.47973C0.0718564 3.17533 0.00297528 2.84794 9.42768e-05 2.51666C-0.00278672 2.18538 0.0603894 1.85684 0.185937 1.55022C0.311485 1.24359 0.49689 0.965024 0.731334 0.730763C0.965778 0.496504 1.24457 0.311244 1.55143 0.185794C1.85829 0.0603437 2.18709 -0.00278473 2.51863 9.34601e-05C2.85017 0.0029726 3.17782 0.0718002 3.48245 0.202559C3.78709 0.333319 4.06261 0.523393 4.29294 0.761689L12.5153 8.97765L20.7377 0.761689C21.0869 0.412868 21.5318 0.175329 22.0161 0.0791044C22.5004 -0.0171213 23.0023 0.0322847 23.4585 0.221081C23.9147 0.409876 24.3046 0.729583 24.579 1.13978C24.8534 1.54998 24.9999 2.03226 25 2.52564Z" fill="#1E3932"/>
        </svg>
      </div>

      <div class="macronutriments" data-dashboard-details-target="macros">
        <ul>
          <div class="macro" id="proteines">
            <div class="macro-title">
              <svg width="25" height="25" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M28.1703 2.52564C26.5422 0.897018 24.3238 0 21.9248 0C19.2413 0 16.5616 1.14041 14.5738 3.12822C11.4663 6.23564 7.85181 13.5087 8.67179 18.1171L4.94241 21.8465C3.65265 21.0903 2.06751 21.2586 0.965849 22.3598C-0.318238 23.6438 -0.322492 25.7299 0.956397 27.0103C1.37513 27.4285 1.88697 27.722 2.44512 27.8676C2.59447 28.4271 2.88985 28.7783 3.30292 29.1909C3.9244 29.8119 4.75242 30 5.63431 30C5.64187 30 5.64896 30 5.65652 30C6.53606 30 7.35982 29.8242 7.97705 29.2074C8.96008 28.2244 9.15196 26.722 8.54891 25.5149L12.1937 21.9141C12.7367 22.0469 13.3369 22.1357 13.9906 22.1357C18.435 22.1357 24.7132 18.9659 27.5673 16.1113C29.4516 14.2275 30.558 11.7903 30.6837 9.23957C30.8113 6.65438 29.9181 4.27336 28.1703 2.52564ZM6.65421 24.8235C6.2851 25.1916 6.2851 25.7909 6.65374 26.16C7.08429 26.5901 7.17266 27.5032 6.64098 28.0339C6.37868 28.2972 6.02091 28.4446 5.64707 28.4375C5.26567 28.4347 4.90838 28.2863 4.63994 28.0174C4.37622 27.7541 4.22498 27.3917 4.22404 27.0225C4.22262 26.5017 3.80058 26.0811 3.28023 26.0802C2.90687 26.0792 2.55619 25.9341 2.29294 25.6713C1.75133 25.1297 1.75511 24.2436 2.3024 23.6968C2.88654 23.1117 3.73205 23.141 4.35826 23.7667C4.53549 23.9439 4.77605 24.0437 5.02653 24.0437C5.27702 24.0437 5.51758 23.9439 5.69481 23.7667L9.40387 20.0586C9.56314 20.3044 9.74226 20.5359 9.95115 20.7444C10.0816 20.8753 10.2229 20.9953 10.3704 21.1083L6.65421 24.8235ZM28.7956 9.15213C28.6931 11.233 27.7823 13.2336 26.2307 14.7852C23.6432 17.3723 17.8589 20.2661 13.991 20.2661C12.767 20.2661 11.8572 19.9773 11.2877 19.4078C8.72898 16.8482 12.404 7.97155 15.9103 4.46477C17.5465 2.82858 19.7389 1.89045 21.9248 1.89045C23.819 1.89045 25.562 2.59039 26.8338 3.86219C28.1992 5.22756 28.8963 7.10667 28.7956 9.15213Z" fill="#1E3932"/>
                <path d="M24.552 4.17699C24.32 4.05931 24.0345 4.15336 23.9168 4.38541C23.7991 4.61841 23.8927 4.90292 24.1252 5.0206C24.5605 5.24036 24.9556 5.52582 25.2987 5.86941C25.3909 5.96157 25.5119 6.00788 25.6329 6.00788C25.7539 6.00788 25.8749 5.96157 25.967 5.86941C26.1518 5.68462 26.1518 5.38593 25.967 5.20114C25.553 4.78666 25.0766 4.44165 24.552 4.17699Z" fill="#1E3932"/>
                <path d="M21.2116 3.60275C19.6974 3.77194 18.2465 4.48228 17.1259 5.60284C15.8565 6.8718 14.5076 9.17012 13.7685 11.3233C13.6839 11.57 13.8157 11.839 14.0624 11.924C14.113 11.941 14.165 11.9495 14.2156 11.9495C14.4117 11.9495 14.5955 11.8262 14.6627 11.6301C15.3588 9.60114 16.6174 7.44792 17.7937 6.27159C18.763 5.30179 20.0136 4.68786 21.3161 4.54277C21.5756 4.51347 21.7618 4.27953 21.7334 4.02054C21.705 3.76107 21.4735 3.57344 21.2116 3.60275Z" fill="#1E3932"/>
                <path d="M3.4022 23.3834C3.40031 23.3834 3.39842 23.3834 3.397 23.3834C3.12903 23.3834 2.60868 23.7365 2.35678 24.3164C2.25233 24.5555 2.36245 24.9378 2.60206 25.0423C2.6635 25.0692 2.72731 25.1245 2.78969 25.1245C2.97259 25.1245 3.14604 25.0352 3.22355 24.857C3.28593 24.7148 3.3814 24.6944 3.42252 24.6897C3.67631 24.6789 3.87764 24.2918 3.87481 24.0361C3.87197 23.7766 3.66072 23.3834 3.4022 23.3834Z" fill="#1E3932"/>
              </svg>
              <p>Protéines</p>
            </div>
            <p class="macro-value"><%= @proteines %>g</p>
          </div>
          <div class="macro" id="glucides">
            <div class="macro-title">
              <svg width="25" height="25" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M24.8026 0C22.9952 0 21.0934 0.765827 19.6945 1.49592C19.0155 1.3887 17.7238 1.30446 16.3402 1.621C15.5897 1.79204 14.8366 2.0856 14.2367 2.61913C13.6394 3.15266 13.2309 3.95933 13.2309 4.94214V5.57522C13.1314 5.56756 12.9935 5.51396 12.8991 5.51396C11.9086 5.51396 10.502 5.57777 9.2614 6.22873C8.02076 6.87713 7.01498 8.21477 7.01498 10.3412V10.7726C6.80565 10.7752 6.58356 10.7446 6.38445 10.7931C5.49864 11.01 4.41372 11.3674 3.53302 12.2022C2.65487 13.0395 2.0371 14.3516 2.0371 16.2355V16.8993C2.01668 16.9222 1.99881 16.9146 1.98094 16.9426C1.2483 18.1118 0 21.0781 0 24.167C0 26.1377 0.439074 27.5928 1.23553 28.573C2.03199 29.5558 3.18074 30 4.35245 30C6.74438 30 9.16184 28.841 11.7299 26.9699C14.2954 25.0987 17.0294 22.4923 20.0417 19.4622C25.936 13.5373 30 8.6998 30 3.8904C30 2.44044 29.2035 1.37338 28.1799 0.786249C27.1537 0.196562 25.9181 0 24.8026 0ZM24.8026 1.24575C25.7624 1.24575 26.8142 1.44231 27.5596 1.86862C28.3024 2.29238 28.7543 2.85909 28.7543 3.8904C28.7543 7.96971 25.0094 12.7025 19.1559 18.5841C16.159 21.5989 13.4556 24.167 10.9947 25.9615C8.53387 27.7561 6.33339 28.7543 4.35245 28.7543C3.47686 28.7543 2.75953 28.4709 2.20558 27.7868C1.64908 27.1052 1.24575 25.9513 1.24575 24.167C1.24575 21.5836 2.33833 18.9159 2.92035 17.8872C3.07352 17.905 3.25477 17.9331 3.50749 17.9816C4.1227 18.0965 4.96001 18.2777 5.8305 18.4309C6.70354 18.5841 7.60722 18.7143 8.40368 18.727C9.20014 18.7398 9.94809 18.7168 10.4638 18.1195C10.7267 17.8131 10.719 17.2975 10.5608 17.0014C10.4025 16.7052 10.1727 16.5036 9.89959 16.3045C9.3533 15.9062 8.59513 15.5591 7.72464 15.2961C6.40231 14.8979 4.8145 14.6835 3.46664 15.1251C3.64023 14.2342 3.9389 13.5398 4.39329 13.1084C5.02638 12.506 5.88155 12.1996 6.68057 12.0056C6.95626 11.9392 7.68635 12.0133 8.54153 12.2405C9.3967 12.4651 10.3999 12.8021 11.393 13.111C12.3834 13.4173 13.3637 13.6955 14.2393 13.7925C14.6758 13.841 15.0919 13.8487 15.4876 13.7619C15.8807 13.6751 16.2738 13.4786 16.5393 13.1314C16.8125 12.7765 16.8329 12.2634 16.6823 11.8907C16.5317 11.518 16.2738 11.2219 15.9522 10.936C15.314 10.3693 14.4001 9.8613 13.3688 9.47328C12.34 9.08526 11.1964 8.82743 10.1038 8.83254C9.56773 8.83765 9.03931 8.91167 8.54663 9.07505C8.80956 8.25562 9.22056 7.65827 9.84088 7.33152C10.7522 6.85415 11.975 6.7597 12.8991 6.7597C13.2309 6.7597 13.9661 6.91542 14.7907 7.14006C15.6152 7.36726 16.5546 7.65827 17.4506 7.89823C18.3441 8.13819 19.1789 8.33475 19.8911 8.35262C20.2459 8.36028 20.5803 8.3373 20.9122 8.16116C21.244 7.98502 21.507 7.55616 21.507 7.15793C21.507 6.42274 21.0679 5.81263 20.5037 5.36845C19.937 4.92172 19.2172 4.59496 18.4284 4.36266C17.1903 3.99762 15.8424 3.96443 14.6222 4.19673C14.7218 3.94401 14.8673 3.72958 15.0689 3.54833C15.4391 3.21903 15.9981 2.97907 16.6184 2.83611C17.8591 2.5502 19.3601 2.67274 19.6869 2.73656L19.9013 2.7774L20.0979 2.67529C21.3972 1.98349 23.3092 1.24575 24.8026 1.24575ZM15.9369 5.24336C16.644 5.25357 17.4021 5.36079 18.0761 5.55735C18.75 5.75647 19.3448 6.04493 19.7303 6.34871C20.0749 6.6193 20.177 6.85671 20.2051 7.07369C20.1413 7.08901 20.0902 7.10943 19.9217 7.10432C19.4341 7.09156 18.6351 6.92563 17.7723 6.69333C16.9095 6.46103 15.9752 6.17257 15.1225 5.93771C14.5839 5.78965 14.1704 5.74626 13.7211 5.66967L14.0912 5.51906C14.5686 5.32505 15.2272 5.23315 15.9369 5.24336ZM10.1115 10.0808C10.9947 10.0757 12.0158 10.2978 12.9323 10.6399C13.8487 10.9845 14.6605 11.4568 15.1225 11.8678C15.3548 12.0745 15.4876 12.2686 15.5233 12.3553C15.5361 12.3834 15.5386 12.3758 15.5412 12.3783C15.4901 12.4447 15.411 12.5009 15.2221 12.5417C15.0255 12.5851 14.732 12.5928 14.3771 12.5519C13.6675 12.4753 12.7332 12.2175 11.7606 11.9163C10.788 11.6176 9.77706 11.2755 8.85807 11.033C8.55939 10.9539 8.29135 10.9079 8.01566 10.8543L8.08969 10.7726C8.52621 10.3131 9.23077 10.0859 10.1115 10.0808ZM4.98298 16.1564C5.75647 16.1334 6.60143 16.2611 7.36215 16.4908C8.12543 16.7206 8.79425 17.0448 9.16695 17.3154C9.19248 17.3332 9.18482 17.3358 9.20779 17.3536C9.04442 17.4073 8.90402 17.4864 8.4241 17.4813C7.75272 17.4711 6.88989 17.3511 6.04748 17.203C5.20762 17.0524 4.38053 16.8763 3.73724 16.7563C3.5177 16.7129 3.34922 16.6899 3.17052 16.6644C3.63257 16.3479 4.26566 16.1794 4.98298 16.1564Z" fill="#1E3932"/>
              </svg>
              <p>Glucides</p>
            </div>
            <p class="macro-value"><%= @glucides %>g</p>
          </div>
          <div class="macro" id="lipides">
            <div class="macro-title">
              <svg width="21" height="25" viewBox="0 0 24 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.051 17.9434C21.0687 15.8846 19.6414 14.2728 18.5176 12.7691C17.9542 12.0182 17.4658 11.2974 17.1278 10.581C16.7889 9.86268 16.5965 9.1582 16.596 8.39203C16.596 8.27707 16.6005 8.16064 16.6094 8.04223V8.04176C16.6178 7.93617 16.6508 7.81084 16.7199 7.66137C16.8398 7.40086 17.0746 7.08117 17.3771 6.74818C17.83 6.24498 18.4205 5.71412 18.941 5.15607C19.2015 4.87588 19.4467 4.58678 19.649 4.27002C19.8497 3.95332 20.0155 3.60152 20.0674 3.19301C20.0807 3.08795 20.0871 2.98383 20.0871 2.88023C20.0856 2.49193 19.9983 2.09525 19.7418 1.74891C19.6144 1.5777 19.4403 1.42582 19.2336 1.32363C19.0274 1.22104 18.7945 1.1707 18.5651 1.1717L18.4664 1.17469L18.4689 1.17416C17.5152 1.22842 16.4145 1.30887 15.1254 1.40947L15.3172 0H9.17045L9.42504 1.86439C9.01055 1.89697 8.535 1.93594 8.05002 1.97783C7.45553 2.02916 6.85113 2.08488 6.34148 2.13967C6.08596 2.1668 5.85457 2.19398 5.65676 2.22059C5.45695 2.24771 5.29711 2.27191 5.15496 2.30396L5.15643 2.3035C4.27383 2.50031 3.34482 2.894 2.46023 3.56057C1.6152 4.19648 1.01625 5.06924 0.614179 6.0283L0.613242 6.03076C0.213105 6.99621 0.00046875 8.08061 0 9.21932C0 10.7927 0.411504 12.4863 1.36365 14.0612C2.01293 15.1352 2.92512 16.0736 4.00266 16.9384C3.03316 18.5655 2.2882 20.4926 2.29066 22.8547C2.2902 24.7907 2.78303 26.9965 3.97646 29.5619L4.18014 30H21.2217L21.4254 29.5619C22.646 26.9383 23.1487 24.6945 23.1482 22.7309C23.1497 20.8941 22.7047 19.3154 22.051 17.9434ZM20.2433 28.4844H5.15848C4.18658 26.2712 3.80672 24.4275 3.80619 22.8547C3.80865 20.7442 4.46877 19.0805 5.39086 17.564L5.39186 17.5625C5.50383 17.3716 5.5749 17.1605 5.57883 16.8817C5.57883 16.7169 5.54672 16.5294 5.46187 16.3464C5.3785 16.1629 5.24186 15.9906 5.07264 15.859C4.02967 15.039 3.20877 14.185 2.6601 13.2768C1.85789 11.9506 1.51553 10.5302 1.51553 9.21984C1.51605 8.27063 1.69412 7.38105 2.01287 6.61342C2.33502 5.84426 2.78795 5.20986 3.37154 4.77123C4.08006 4.23891 4.79982 3.93703 5.48707 3.78258L5.48859 3.78211C5.54285 3.7698 5.68248 3.74607 5.85861 3.72246C6.48416 3.63809 7.60951 3.53496 8.61896 3.45059C9.63135 3.36574 10.5317 3.29859 10.7577 3.28037C14.1741 3.00604 16.6696 2.79486 18.5413 2.68834L18.5517 2.714C18.5626 2.7515 18.5715 2.80875 18.5715 2.88029L18.5635 3.00703C18.5546 3.07957 18.5226 3.18662 18.4495 3.3218C18.3243 3.5591 18.0771 3.86695 17.7657 4.19355C17.299 4.68838 16.6991 5.22662 16.1771 5.81672C15.9156 6.11367 15.6724 6.42504 15.4766 6.76934C15.2822 7.11223 15.1327 7.49654 15.0987 7.92428C15.0864 8.08213 15.0805 8.23805 15.0805 8.39197C15.0795 9.76693 15.5561 10.9767 16.2107 12.0744C17.1974 13.7242 18.5818 15.1944 19.6864 16.8609C20.7935 18.53 21.6298 20.345 21.6327 22.7309C21.6326 24.3304 21.2424 26.2135 20.2433 28.4844Z" fill="#1E3932"/>
                <path d="M7.18763 18.3187C5.937 20.2729 5.04896 22.643 6.45403 26.5608H18.9517C20.3104 22.828 19.6592 20.4505 18.337 18.3187H7.18763Z" fill="#1E3932"/>
                <path d="M6.77372 13.592C6.96315 13.513 7.14965 13.3857 7.29813 13.2022C7.7984 12.5816 8.27993 11.958 8.64842 11.2756C9.01604 10.5948 9.2701 9.8415 9.26911 9.0097C9.26911 8.83503 9.25528 8.65744 9.2326 8.47738H9.23407C9.23161 8.45072 9.20055 8.02152 9.05454 7.51533C8.98001 7.26121 8.87793 6.98646 8.71165 6.72103C8.6278 6.58884 8.5262 6.45806 8.39641 6.33964C8.26668 6.22175 8.10637 6.11617 7.91688 6.04955L7.90504 6.04509L7.89274 6.04111C7.70817 5.98439 7.52465 5.94589 7.35543 5.91876C7.18821 5.8931 7.04219 5.87927 6.90403 5.87828V5.87781H6.88235C6.65688 5.87781 6.48713 5.88373 6.31938 5.90494C6.15116 5.92662 6.0086 5.95919 5.832 5.99916L5.83047 5.99968C5.40473 6.09537 4.95872 6.28187 4.51223 6.61638C4.17579 6.86998 3.90151 7.24439 3.69672 7.73189L3.69725 7.73037C3.49745 8.21189 3.38249 8.77978 3.38196 9.39203C3.38196 10.2352 3.60204 11.1528 4.12153 12.0118L4.12252 12.0127C4.41508 12.4947 4.80631 12.9969 5.3544 13.4296C5.61737 13.6329 5.90946 13.7039 6.19657 13.7063C6.38893 13.7059 6.58376 13.6708 6.77372 13.592ZM5.2443 11.3304L5.24524 11.3319C4.856 10.6885 4.69516 10.0082 4.69516 9.39197C4.69463 8.94941 4.78293 8.53849 4.90979 8.2355L4.91026 8.23404C5.03114 7.9341 5.20827 7.7313 5.2951 7.67113C5.61479 7.43728 5.83874 7.34845 6.12637 7.27937L6.12485 7.27984C6.30098 7.23941 6.39573 7.21914 6.48403 7.2083C6.57233 7.19699 6.67838 7.19107 6.88217 7.19107H6.8861H6.89301H6.89495C6.92999 7.1906 7.03756 7.19845 7.15252 7.21667C7.2611 7.23343 7.38098 7.26015 7.48311 7.29027L7.51217 7.31142C7.55167 7.34494 7.62075 7.43875 7.67946 7.56947C7.77022 7.76435 7.83877 8.02925 7.87627 8.23597C7.89549 8.33957 7.90786 8.42892 7.9153 8.4905L7.92268 8.56005L7.9242 8.57587L7.92467 8.57834L7.9262 8.59656L7.9286 8.61578C7.94688 8.75095 7.95579 8.88167 7.95579 9.00947C7.95479 9.57285 7.78997 10.0973 7.49202 10.6523C7.19553 11.2039 6.76581 11.7713 6.27883 12.3732L6.19645 12.3928L6.15602 12.3875C5.76332 12.0744 5.47715 11.7127 5.2443 11.3304Z" fill="#1E3932"/>
              </svg>
              <p>Lipides</p>
            </div>
            <p class="macro-value"><%= @lipides %>g</p>
          </div>
        </ul>
      </div>
    </div>
  </div>

  <%= render "choix_recettes/user_choix_today", choix_recettes: @choix_recettes %>

  <h1 class="best-recettes-title">Découvrez les recettes préférées des Fitos !</h1>

  <%= render "recettes/best_recettes_carousel", recettes: @best_recettes %>
</div>
